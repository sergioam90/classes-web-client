<!-- Main content -->
<div class="col-sm-9 col-sm-offset-1">

    <div class="row panel panel-body">
        <div class="col-sm-12 col-xs-12">
            <!-- City and text filters -->
            <div class="row filter-row">

                <!-- City filter -->
                <div class="col-sm-4">
                    <ui-select ng-model="vm.searchCriteria.city" theme="bootstrap">
                        <ui-select-match placeholder="Elija una ciudad...">{{ $select.selected | city }}
                        </ui-select-match>
                        <ui-select-choices
                                repeat="city in vm.cities">
                            <div ng-bind-html="city | city | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>

                <!-- Text filter -->
                <div class="col-sm-4">
                    <input ng-model="vm.searchCriteria.text"
                           ng-model-options="{ debounce: 750 }"
                           ng-change="vm.search()"
                           type="text"
                           class="form-control"
                           placeholder="Nombre o descripcion..."/>
                </div>


            </div>

            <!-- Toggle filters -->
            <div class="row text-center">

                <!-- Subject filter -->
                <div class="col-sm-1 col-xs-2">
                    <p class="lead text-success"><i class="fa fa-flask"></i></p>
                </div>

                <!-- Fee filter -->
                <div class="col-sm-2 col-xs-3">
                    <fee-filter ng-click="vm.search()" ng-model="vm.searchCriteria.fee"></fee-filter>
                </div>

                <!-- Home lesson filter -->
                <div class="col-sm-1 col-xs-2" tooltip="A domicilio">
                    <home-filter ng-click="vm.search()" ng-model="vm.searchCriteria.homeLessons"></home-filter>
                </div>

                <!-- Degree filter -->
                <div class="col-sm-1 col-xs-2">
                    <degree-filter ng-click="vm.search()" ng-model="vm.searchCriteria.degree"></degree-filter>
                </div>

                <!-- Individual lessons -->
                <div class="col-sm-1 col-xs-2">
                    <individual-filter ng-model="vm.searchCriteria.individualLessons"
                                       ng-click="vm.search()">
                    </individual-filter>
                </div>

                <!-- For proper column alignment -->
                <div class="clearfix visible-xs-block"></div>

                <!-- Rating filter -->
                <div class="col-sm-2 col-xs-4">
                    <div>
                        <rating class="text-warning"
                                tooltip="Calificación"
                                ng-model="vm.searchCriteria.averageRating">
                        </rating>
                    </div>
                    mín.
                </div>

                <!-- Schedule filter -->
                <div class="col-sm-1 col-xs-2">
                    <schedule-filter ng-model="vm.searchCriteria.schedule"></schedule-filter>
                </div>

                <!-- Advanced search -->
                <div class="col-sm-1 col-xs-2">
                    <p class="lead hand-pointer" tooltip="Búsqueda avanzada"
                       ng-click="vm.advancedVisible = !vm.advancedVisible">
                        <i class="fa fa-minus" ng-if="vm.advancedVisible"></i>
                        <i class="fa fa-plus" ng-if="!vm.advancedVisible"></i>
                    </p>
                </div>

                <!-- Help button -->
                <div class="col-sm-1 col-xs-2 text-center">
                    <p class="lead" tooltip="Ayuda"><i class="fa fa-question-circle text-primary"></i><br></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Search results -->
    <div class="row">
        <div ng-repeat="teacher in vm.teachersResult" class="col-sm-6 col-xs-12">

        <teacher-result ng-model="teacher" view-profile="vm.viewProfile(teacher)"></teacher-result>
        </div>
    </div>

    <!-- Nothing found message -->
    <h4 class="text-center" ng-if="!vm.teachersResult.length">
        ¡Uh! No hay nadie que cumpla esas condiciones :(
    </h4>

    <p class="lead text-center" ng-if="!vm.teachersResult.length">
        Tip: Revisa los filtros ;)
    </p>
</div>

<!-- Sidebar -->
<div class="col-sm-3" ng-init="vm.advancedVisible = false" ng-show="vm.advancedVisible">
    <div>
        <!-- City -->
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title text-uppercase text-center">Ciudad</h3>
            </div>
            <div class="panel-body">
                <ui-select ng-model="vm.searchCriteria.city" theme="bootstrap">
                    <ui-select-match placeholder="Elija una ciudad...">{{ $select.selected | city }}
                    </ui-select-match>
                    <ui-select-choices
                            repeat="city in vm.cities">
                        <div ng-bind-html="city | city | highlight: $select.search"></div>
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>

        <!-- Text search -->
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title text-uppercase text-center">Búsqueda</h3>
            </div>
            <div class="panel-body">
                <div class="input-group">
                    <input ng-model="vm.searchCriteria.text" type="text" class="form-control"
                           placeholder="Nombre o descripcion..."/>
                    <span class="input-group-btn">
                        <button class="btn btn-primary" type="button" ng-click="vm.search()"><i
                                class="fa fa-search"></i></button>
                    </span>
                </div>
            </div>
        </div>

        <!-- Subjects -->
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title text-uppercase text-center">Materias</h3>
            </div>
            <div class="panel-body">
                <div ng-repeat="subject in vm.subjects">
                    <div class="checkbox">
                        <label>
                            <input ng-model="subject.selected" value="{{ subject.selected }}" type="checkbox"/> {{
                            subject.name }}
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Degree -->
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title text-uppercase text-center">Estudios</h3>
            </div>
            <div class="panel-body">
                <div ng-repeat="degree in vm.degrees">
                    <div class="checkbox">
                        <label>
                            <input ng-model="degree.selected" value="{{ degree.selected }}" type="checkbox"/> {{
                            degree.name | degree }}
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fee -->
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title text-uppercase text-center">Precio maximo</h3>
            </div>
            <div class="panel-body">
                <rzslider ng-init="vm.searchCriteria.fee = 400"
                          rz-slider-model="vm.searchCriteria.fee"
                          rz-slider-translate="vm.moneyTranslate"
                          rz-slider-floor="20"
                          rz-slider-ceil="400"
                          rz-slider-step="20"
                          rz-slider-always-show-bar="true">
                </rzslider>
            </div>
        </div>

        <!-- Class audience -->
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title text-uppercase text-center">Tipo de clase</h3>
            </div>
            <div class="panel-body">
                <div class="col-sm-9">
                    <div>
                        <input type="radio" ng-model="vm.searchCriteria.groupLessons" ng-value="undefined"/> Cualquiera
                    </div>
                    <div>
                        <input type="radio" ng-model="vm.searchCriteria.groupLessons" ng-value="false"/> Personalizada
                    </div>
                    <div>
                        <input type="radio" ng-model="vm.searchCriteria.groupLessons" ng-value="true"/> Grupal
                    </div>
                </div>
            </div>
        </div>

        <!-- Home lessons -->
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title text-uppercase text-center">A domicilio</h3>
            </div>
            <div class="panel-body">
                <div class="col-sm-9">
                    <div>
                        <input type="radio" ng-model="vm.searchCriteria.homeLessons" ng-value="undefined"/> Cualquiera
                    </div>
                    <div>
                        <input type="radio" ng-model="vm.searchCriteria.homeLessons" ng-value="false"/> No va a
                        domicilio
                    </div>
                    <div>
                        <input type="radio" ng-model="vm.searchCriteria.homeLessons" ng-value="true"/> Va a domicilio
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Ads -->
<div class="col-sm-2 hidden-xs">
    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title text-center">¡Anuncie aquí!</h3>
        </div>
    </div>
</div>
