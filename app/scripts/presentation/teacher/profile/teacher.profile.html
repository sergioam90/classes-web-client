<div class="row" ng-controller="TeacherProfileController as vm">

    <div class="panel panel-body">

        <h3>Perfil de profesor</h3>

        <dl>
            <div ng-if="vm.currentUser.student && vm.currentUser.teacher !== vm.teacher.id"
                 ng-click="vm.toggleFavorite(vm.teacher)">
                <i ng-if="vm.teacher.isFavorite" class="fa fa-star fa-2x yellow-star"></i>
                <i ng-if="!vm.teacher.isFavorite" class="fa fa-star-o fa-2x yellow-star"></i>
            </div>

            <!-- User information -->
            <dt>Nombre</dt>
            <dd>{{ vm.teacher.user.firstName }} {{ vm.teacher.user.lastName }}</dd>

            <dt>Email</dt>
            <dd>{{ vm.teacher.user.email }}</dd>

            <dt>Género</dt>
            <dd>{{ vm.teacher.user.gender | gender }}</dd>

            <dt>Fecha de nacimiento</dt>
            <dd>{{ vm.teacher.user.birthDate }}</dd>

            <dt>Imagen de perfil</dt>
            <dd>{{ vm.teacher.user.profilePicture }}</dd>

            <!-- Teacher information -->
            <dt>Descripción</dt>
            <dd>{{ vm.teacher.description }}</dd>

            <dt>Estudios</dt>
            <dd>{{ vm.teacher.degree | degree }}</dd>

            <dt>Puntaje</dt>
            <rating ng-model="vm.teacher.averageRating" readonly="true"></rating>


            <dt>Clase grupal</dt>
            <dd>{{ vm.teacher.groupLessons }}</dd>

            <dt>A domicilio</dt>
            <dd>{{ !vm.teacher.homeLessons }}</dd>

            <dt>Teléfono</dt>
            <dd>
                Numero: {{ vm.teacher.phone.number }}
                Tiene whatsapp: {{ vm.teacher.phone.whatsApp }}
            </dd>

            <dt>Materias</dt>
            <dd>
                <p class="lead">
                <span class="label label-primary" ng-repeat="subject in vm.teacher.subjects">
                    {{ subject.name }} - {{ subject.level | level }}
                </span>
                </p>
            </dd>

            <dt>Ubicación</dt>
            <dd>{{ vm.teacher.location }} - {{ vm.teacher.location.city | city }}</dd>

            <dt>Profesores relacionados</dt>
            <dd>
                <div ng-repeat="teacher in vm.relatedTeachers">
                    Nombre: {{ teacher.user.firstName }}
                </div>
            </dd>

            <div ng-if="vm.currentUser.student && vm.currentUser.teacher !== vm.teacher.id">
                <dt>Mi reseña</dt>
                <dd>
                    <div class="row">
                        <div class="col-sm-6">
                            <button ng-click="vm.showReviewModal()" class="btn btn-warning">Calificar</button>
                            <div class="row">
                                <div class="col-sm-2">
                                    <img src="images/mock.jpg" class="img img-responsive"/>
                                </div>
                                <div class="col-sm-10">
                                    <div class="row">
                                        <div class="col-sm-8">
                                            {{ vm.teacher.review.student.user.firstName }} {{
                                            vm.teacher.review.student.user.lastName }}
                                        </div>
                                        <div class="col-sm-4">
                                            <rating ng-model="vm.teacher.review.rating" readonly="true"></rating>
                                        </div>
                                        <div class="col-sm-12">
                                            <p>{{ vm.teacher.review.comment }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </dd>
            </div>

            <!-- Recieved reviews -->
            <dt>Reseñas recibidas</dt>
            <dd>
                <div ng-repeat="review in vm.reviews">

                    <p>Estudiante: {{ review.student.user.firstName }} {{ review.student.user.lastName }}</p>

                    <p>URL: {{ review.student.id }}</p>

                    <p>Comentario: {{ review.comment }}</p>

                    <p>Puntaje:
                        <rating ng-model="review.rating" readonly="true"></rating>
                    </p>
                </div>
            </dd>

        </dl>
    </div>
</div>
